@using System;
@using System.Collections.Generic;
@using System.Diagnostics.CodeAnalysis;
@using System.Globalization;
@using System.Linq;
@using System.Linq.Expressions;
@using System.Threading.Tasks;
@using Sanchez.DansUI.Components.Component

<TextField Label=@Label Value=@Value ValueChanged=@ValueChanged ValueExpression=@ValueExpression type=@TextFieldType>
    <Prefix>
        @Prefix
    </Prefix>
    <Suffix>
        <Icon Type="@SuffixType" @onclick="HandleToggleField" />
    </Suffix>
</TextField>

@code {
    bool ShowPassword { get; set; } = false;

    string TextFieldType => ShowPassword ? "text" : "password";

    Icons.IconType SuffixType => ShowPassword ? Icons.IconType.EYE_OFF : Icons.IconType.EYE;

    void HandleToggleField()
    {
        ShowPassword = !ShowPassword;
    }

    [Parameter]
    public string Label { get; set; }

    [Parameter]
    public RenderFragment Prefix { get; set; }

    [Parameter]
    public string Value { get; set; }

    [Parameter]
    public EventCallback<string> ValueChanged { get; set; }

    [Parameter]
    public Expression<Func<string>> ValueExpression { get; set; }
}